## this란?

> 현재 실행 중인 함수의 컨텍스트를 가리키는 키워드이다.

- `this`는 함수가 호출될 때 동적으로 결정되며, 실행 문맥에 따라 다른 값을 가질 수 있다.

### 📌 this가 결정되는 상황

- **전역 범위에서의 `this`**
    - 전역 범위에서 `this`는 전역 객체를 가리킨다.

      브라우저 환경일 경우 전역 객체는 `window` 객체이다.
- **함수 내부에서의 `this`**
    - 해당 **함수가 호출된 방식에 따라** 달라진다.
    1. **일반 함수 호출**
        
        일반 함수 내부에서 `this`는 호출한 객체 또는 전역 객체를 가리킨다.
        
        일반 함수가 메서드로 호출된 경우에는 해당 메서드를 호출한 객체를 가리킨다.
        
    2. **메서드 호출**
        
        객체의 메서드 내부에서 `this`는 해당 메서드를 호출한 객체를 가리킨다.
        
    3. **생성자 함수 호출**
        
        생성자 함수 내부에서 `this`는 생성된 객체를 가리킨다.
        
    4. **화살표 함수**
        
        화살표 함수 내부에서 `this`는 함수가 정의된 시점에서의 상위 스코프의 `this`를 가리킨다.

<br />

### 📌 화살표 함수에서 `this`는 어떻게 동작하는가

> 화살표 함수는 자체적인 `this`를 가지지 않고 **상위 스코프의 `this`를 상속**받는다.
> 
> 따라서, 화살표 함수 내부에서 사용된 `this`는 **함수를 감싸는 가장 가까운 함수 또는 전역 객체에 바인딩**된다.

- 이는 화살표 함수가 **Lexical this(정적 this)**를 가지고 있다는 것을 의미한다.
- **예시**
    
    ```jsx
    const obj = {
      name: 'John',
      sayHello: function() {
        setTimeout(() => {
          console.log(`Hello, ${this.name}!`);
        }, 1000);
      }
    };
    
    obj.sayHello(); // 출력: Hello, John!
    ```
    
    - `sayHello` 함수는 화살표 함수가 아니라 일반 함수지만, `setTimeout` 콜백 함수 내에서 화살표 함수를 사용한다.
    - 이로 인해 화살표 함수는 자체적인 `this`를 가지지 않고, 상위 스코프인 `sayHello` 함수의 `this`를 상속받는다.
    - `sayHello` 함수의 `this`는 `obj` 객체를 가리킨다(= **메서드 호출**, 객체의 메서드 내부에서 `this`는 해당 메서드를 호출한 객체를 가리킴).
    - 그래서 화살표 함수 내에서 `this.name`은 `obj` 객체의 `name` 속성에 접근할 수 있게 된다.

<br />

### 📌 Lexical this(정적 this)란?

> 자바스크립트의 **화살표 함수가 가지는 특성**.

- 화살표 함수는 함수가 선언된 시점에서의 `this`를 유지하며, 호출 시에 동적으로 바인딩되지 않는다.

- **동작 방식**
    1. 화살표 함수의 `this`는 함수를 감싸는 **최상위 스코프의 `this`를 상속** 받는다.
    2. 화살표 함수 내부에서 `this`를 사용하면, **화살표 함수가 선언된 스코프의 `this`를 참조**한다.
    3. 화살표 함수가 **선언된 위치에서 `this`가 결정**되므로, 화살표 함수를 **호출하는 방법에 관계없이 `this`는 변하지 않는다.**