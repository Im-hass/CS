## 호이스팅(hoisting)이란

> 자바스크립트에서 **변수와 함수 선언이 코드의 상단으로** 끌어올려지는 동작을 의미한다.
> 
> 즉, **코드 실행 전에 변수와 함수 선언이 메모리에 할당되는 것**을 말한다.

- **자바스크립트 엔진**이 코드를 해석하고 실행하기 전에 발생하는 **전처리 과정** 중 하나이다.
- 호이스팅은 **스코프(scope) 단위로** 이루어지며, 전역 스코프와 함수 스코프에서 발생할 수 있다.
- `let`과 `const`로 선언된 변수는 호이스팅이 발생하지만 변수가 TDZ에 빠지기 때문에 선언 이전에 변수에 접근하려고 하면 에러가 발생한다. 따라서 변수를 사용하기 전에 선언과 초기화를 해주어야 한다.
- 실행 컨텍스트 생성 시, 렉시컬 스코프 내의 선언이 끌어올려지는 것

<br />

### 📌 자바스크립트에서 호이스팅이 발생하는 이유

> **자바스크립트 엔진**이 코드를 해석하고 실행하기 전에 **전처리 단계**를 거치는데, 이 과정에서 **변수와 함수 선언을 메모리에 먼저 올리게 되므로** 호이스팅이 발생한다.
> 
> 이를 통해 변수와 함수를 선언하기 전에도 사용할 수 있게 된다.

<br />

### 📌 호이스팅 발생 순서

> **1. 변수 선언의 호이스팅**
> 
> **2. 함수 선언의 호이스팅**
> 
> **3. 실제 코드 실행**

1. **변수 선언의 호이스팅**
    - 변수 선언(`var`, `let`, `const`)이 해당 스코프의 상단으로 끌어올려진다.
    - 변수가 메모리 공간에 할당되지만, 설정된 값으로 초기화되지 않고 `undefined`로 초기화된다.
2. **함수 선언의 호이스팅**
    - (함수 선언식의 경우) 함수 선언 전체가 해당 스코프의 상단으로 끌어올려진다.
3. **실제 코드 실행**
    - 변수 선언 및 함수 선언의 호이스팅이 이루어진 후, 코드의 나머지 부분이 순차적으로 실행된다.
    - 변수에 할당된 값은 해당 코드 위치에서 실제로 할당된다.
    - (함수 선언식의 경우) 함수는 선언된 위치와 상관없이 호출되거나 사용될 수 있다.
    - (함수 표현식의 경우) 함수가 할당된 변수가 선언된 이후에 호출되거나 사용될 수 있다.
- **호이스팅 발생 예시 코드**
    
    ```jsx
    console.log("before", myVariable); // before undefined
    var myVariable = 10;
    console.log("after", myVariable); // after 10
    
    helloWorld(); // "Hello, World!"
    
    function helloWorld() {
      console.log("Hello, World!");
    }
    ```
    
- **호이스팅 발생 예시 코드 해석**
    
    ```jsx
    var myVariable; // 변수 선언이 호이스팅되고 undefined로 초기화됨
    
    function helloWorld() { // 함수 선언이 호이스팅됨
      console.log("Hello, World!");
    }
    
    console.log("before", myVariable); // 변수는 할당되지 않았으므로 before undefined 출력
    myVariable = 10; // 변수에 값 할당
    console.log("after", myVariable); // 변수에 값이 할당되어 after 10 출력
    
    helloWorld(); // 함수는 선언 이전에 호출 가능하므로 "Hello, World!" 출력
    ```

<br />

### 📌 변수 호이스팅과 함수 호이스팅의 차이

> **변수 호이스팅 :** 변수 선언부만 끌어올려지고 변수의 할당은 그 위치에 그대로 유지되므로, 변수 선언 이전에는 `undefined`로 할당되어 있다.
> 
> **함수 호이스팅 :** (함수 선언식의 경우) 함수 선언 전체가 끌어올려지므로 함수 선언 이전에도 함수를 호출할 수 있다.

<br />

### 📌 함수 선언식과 함수 표현식에서의 호이스팅 동작 차이

> **함수 선언식(Function Declaration) :** 전체가 해당 스코프의 상단으로 끌어올려진다. 때문에 함수 선언 이전에도 해당 함수를 호출할 수 있다.
> 
> **함수 표현식(Function Expression) :** 변수 할당과 동시에 함수가 정의된다. 변수는 호이스팅에 영향을 받지만, (함수) 할당은 호이스팅되지 않기 때문에, 함수 선언 이전에 해당 함수를 호출할 수 없다.

- **함수 선언식(Function Declaration)의 호이스팅**
    - 함수 선언식은 **`function`** 키워드를 사용하여 함수를 선언한다.
    - 함수 선언식은 호이스팅에 의해 전체 함수가 스코프의 상단으로 끌어올려지므로, 선언 이전에도 함수를 호출할 수 있다.
    
    ```jsx
    sayHello(); // "Hello!"
    
    function sayHello() {
      console.log("Hello!");
    }
    ```
    
- **함수 표현식(Function Expression)의 호이스팅**
    - 함수 표현식은 변수에 함수를 할당하는 형태로 함수를 정의한다.
    - 함수 표현식은 호이스팅에 의해 변수 선언부만 스코프의 상단으로 끌어올려지기 때문에, 변수는 호이스팅되지만 함수의 할당은 호이스팅되지 않는다.
    - 따라서 변수에 함수를 할당하기 이전에는 함수를 사용할 수 없다.
    
    ```jsx
    sayHello(); // TypeError: sayHello is not a function
    
    var sayHello = function() {
      console.log("Hello!");
    };
    ```
    
- **함수 선언 예시 코드**
    
    ```jsx
    // 함수 선언식(Function Declaration)
    function declaration() {
      console.log("Hello!");
    }
    declaration(); // "Hello!"
    
    // 함수 표현식(Function Expression)
    var expression = function() {
      console.log("Hello!");
    };
    expression(); // "Hello!"
    ```

<br />

### 📌 호이스팅이 프론트엔드 개발에서 유용하게 쓰이는 상황

> 호이스팅을 상황에 맞게 활용하여 **코드의 가독성, 모듈화, 재귀 함수 등을 구현하는 데 활용**될 수 있다.
> 
> 그러나 호이스팅을 남용하거나 오용하는 것은 코드를 이해하기 어렵게 만들 수 있으므로, 적절하게 사용하는 것이 중요하다.

1. **변수 선언과 초기화를 나눌 때**
    - 변수 호이스팅은 변수를 선언 단계와 초기화 단계로 분리시킬 수 있다.
    - 이를 활용하여 변수 선언은 필요한 시점에, 초기화는 그에 맞는 값을 할당할 때에 수행할 수 있다.

2. **함수 선언식을 사용한 모듈화**
    - 함수 선언식은 호이스팅에 의해 선언과 동시에 사용할 수 있기 때문에, 함수들을 상단에 선언하여 코드를 구조화하고 모듈화하는 데 유용하다.
    - 모듈화를 통해 코드의 가독성과 유지보수성을 향상시킬 수 있다.

3. **함수 선언식을 사용한 재귀 함수**
    - 재귀 함수는 함수 내에서 자기 자신을 호출하는 것을 의미한다.
    - 함수 선언식은 호이스팅에 의해 선언과 동시에 사용할 수 있으므로, 재귀 함수를 구현할 때 유용하게 활용될 수 있다.
